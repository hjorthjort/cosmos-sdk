(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{766:function(e,t,o){"use strict";o.r(t);var s=o(1),c=Object(s.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"messages-and-queries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#messages-and-queries"}},[e._v("#")]),e._v(" Messages and Queries")]),e._v(" "),o("p",{attrs:{synopsis:""}},[o("code",[e._v("Message")]),e._v("s and "),o("code",[e._v("Queries")]),e._v(" are the two primary objects handled by modules. Most of the core components defined in a module, like "),o("code",[e._v("handler")]),e._v("s, "),o("code",[e._v("keeper")]),e._v("s and "),o("code",[e._v("querier")]),e._v("s, exist to process "),o("code",[e._v("message")]),e._v("s and "),o("code",[e._v("queries")]),e._v(".")]),e._v(" "),o("h2",{attrs:{id:"pre-requisite-readings"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisite-readings"}},[e._v("#")]),e._v(" Pre-requisite Readings")]),e._v(" "),o("ul",[o("li",{attrs:{prereq:""}},[o("RouterLink",{attrs:{to:"/building-modules/intro.html"}},[e._v("Introduction to SDK Modules")])],1)]),e._v(" "),o("h2",{attrs:{id:"messages"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[e._v("#")]),e._v(" Messages")]),e._v(" "),o("p",[o("code",[e._v("Message")]),e._v("s are objects whose end-goal is to trigger state-transitions. They are wrapped in "),o("RouterLink",{attrs:{to:"/core/transactions.html"}},[e._v("transactions")]),e._v(", which may contain one or multiple of them.")],1),e._v(" "),o("p",[e._v("When a transaction is relayed from the underlying consensus engine to the SDK application, it is first decoded by "),o("RouterLink",{attrs:{to:"/core/baseapp.html"}},[o("code",[e._v("baseapp")])]),e._v(". Then, each "),o("code",[e._v("message")]),e._v(" contained in the transaction is extracted and routed to the appropriate module via "),o("code",[e._v("baseapp")]),e._v("'s "),o("code",[e._v("router")]),e._v(" so that it can be processed by the module's "),o("RouterLink",{attrs:{to:"/building-modules/handler.html"}},[o("code",[e._v("handler")])]),e._v(". For a more detailed explanation of the lifecycle of a transaction, click "),o("RouterLink",{attrs:{to:"/basics/tx-lifecycle.html"}},[e._v("here")]),e._v(".")],1),e._v(" "),o("p",[e._v("Defining "),o("code",[e._v("message")]),e._v("s is the responsibility of module developers. Typically, they are defined as protobuf messages in a "),o("code",[e._v("proto/")]),e._v(" directory (see more info about "),o("RouterLink",{attrs:{to:"/core/encoding.html#faq"}},[e._v("conventions and naming")]),e._v("). The "),o("code",[e._v("message")]),e._v("'s definition usually includes a list of parameters needed to process the message that will be provided by end-users when they want to create a new transaction containing said "),o("code",[e._v("message")]),e._v(".")],1),e._v(" "),o("p",[e._v("Here's an example of a protobuf message definition:")]),e._v(" "),o("p",[o("code-block",{staticClass:"codeblock",attrs:{language:"false",base64:"Ly8gTXNnU3VibWl0UHJvcG9zYWwgZGVmaW5lcyBhbiBzZGsuTXNnIHR5cGUgdGhhdCBzdXBwb3J0cyBzdWJtaXR0aW5nIGFyYml0cmFyeQovLyBwcm9wb3NhbCBDb250ZW50LgptZXNzYWdlIE1zZ1N1Ym1pdFByb3Bvc2FsIHsKICBvcHRpb24gKGdvZ29wcm90by5lcXVhbCkgPSBmYWxzZTsKCiAgZ29vZ2xlLnByb3RvYnVmLkFueSBjb250ZW50ICAgICAgICAgICAgICAgICAgICAgICA9IDEgWyhjb3Ntb3NfcHJvdG8uYWNjZXB0c19pbnRlcmZhY2UpID0gJnF1b3Q7Q29udGVudCZxdW90O107CiAgcmVwZWF0ZWQgY29zbW9zLmJhc2UudjFiZXRhMS5Db2luIGluaXRpYWxfZGVwb3NpdCA9IDIgWwogICAgKGdvZ29wcm90by5udWxsYWJsZSkgICAgID0gZmFsc2UsCiAgICAoZ29nb3Byb3RvLmNhc3RyZXBlYXRlZCkgPSAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzLkNvaW5zJnF1b3Q7LAogICAgKGdvZ29wcm90by5tb3JldGFncykgICAgID0gJnF1b3Q7eWFtbDpcJnF1b3Q7aW5pdGlhbF9kZXBvc2l0XCZxdW90OyZxdW90OwogIF07CiAgc3RyaW5nIHByb3Bvc2VyID0gMzsKfQ=="}})],1),e._v(" "),o("p",[e._v("The "),o("code",[e._v("Msg")]),e._v(" is typically accompanied by a standard constructor function, that is called from one of the "),o("RouterLink",{attrs:{to:"/building-modules/module-interfaces.html"}},[e._v("module's interface")]),e._v(". "),o("code",[e._v("message")]),e._v("s also need to implement the ["),o("code",[e._v("Msg")]),e._v("] interface:")],1),e._v(" "),o("p",[o("code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CS8vIE1zZyBkZWZpbmVzIHRoZSBpbnRlcmZhY2UgYSB0cmFuc2FjdGlvbiBtZXNzYWdlIG11c3QgZnVsZmlsbC4KCU1zZyBpbnRlcmZhY2UgewoJCXByb3RvLk1lc3NhZ2UKCgkJLy8gUmV0dXJuIHRoZSBtZXNzYWdlIHR5cGUuCgkJLy8gTXVzdCBiZSBhbHBoYW51bWVyaWMgb3IgZW1wdHkuCgkJUm91dGUoKSBzdHJpbmcKCgkJLy8gUmV0dXJucyBhIGh1bWFuLXJlYWRhYmxlIHN0cmluZyBmb3IgdGhlIG1lc3NhZ2UsIGludGVuZGVkIGZvciB1dGlsaXphdGlvbgoJCS8vIHdpdGhpbiB0YWdzCgkJVHlwZSgpIHN0cmluZwoKCQkvLyBWYWxpZGF0ZUJhc2ljIGRvZXMgYSBzaW1wbGUgdmFsaWRhdGlvbiBjaGVjayB0aGF0CgkJLy8gZG9lc24ndCByZXF1aXJlIGFjY2VzcyB0byBhbnkgb3RoZXIgaW5mb3JtYXRpb24uCgkJVmFsaWRhdGVCYXNpYygpIGVycm9yCgoJCS8vIEdldCB0aGUgY2Fub25pY2FsIGJ5dGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIE1zZy4KCQlHZXRTaWduQnl0ZXMoKSBbXWJ5dGUKCgkJLy8gU2lnbmVycyByZXR1cm5zIHRoZSBhZGRycyBvZiBzaWduZXJzIHRoYXQgbXVzdCBzaWduLgoJCS8vIENPTlRSQUNUOiBBbGwgc2lnbmF0dXJlcyBtdXN0IGJlIHByZXNlbnQgdG8gYmUgdmFsaWQuCgkJLy8gQ09OVFJBQ1Q6IFJldHVybnMgYWRkcnMgaW4gc29tZSBkZXRlcm1pbmlzdGljIG9yZGVyLgoJCUdldFNpZ25lcnMoKSBbXUFjY0FkZHJlc3MKCX0="}})],1),e._v(" "),o("p",[e._v("It extends "),o("code",[e._v("proto.Message")]),e._v(" and contains the following methods:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("Route() string")]),e._v(": Name of the route for this message. Typically all "),o("code",[e._v("message")]),e._v("s in a module have the same route, which is most often the module's name.")]),e._v(" "),o("li",[o("code",[e._v("Type() string")]),e._v(": Type of the message, used primarly in "),o("RouterLink",{attrs:{to:"/core/events.html"}},[e._v("events")]),e._v(". This should return a message-specific "),o("code",[e._v("string")]),e._v(", typically the denomination of the message itself.")],1),e._v(" "),o("li",[o("code",[e._v("ValidateBasic() error")]),e._v(": This method is called by "),o("code",[e._v("baseapp")]),e._v(" very early in the processing of the "),o("code",[e._v("message")]),e._v(" (in both "),o("RouterLink",{attrs:{to:"/core/baseapp.html#checktx"}},[o("code",[e._v("CheckTx")])]),e._v(" and "),o("RouterLink",{attrs:{to:"/core/baseapp.html#delivertx"}},[o("code",[e._v("DeliverTx")])]),e._v("), in order to discard obviously invalid messages. "),o("code",[e._v("ValidateBasic")]),e._v(" should only include "),o("em",[e._v("stateless")]),e._v(" checks, i.e. checks that do not require access to the state. This usually consists in checking that the message's parameters are correctly formatted and valid (i.e. that the "),o("code",[e._v("amount")]),e._v(" is strictly positive for a transfer).")],1),e._v(" "),o("li",[o("code",[e._v("GetSignBytes() []byte")]),e._v(": Return the canonical byte representation of the message. Used to generate a signature.")]),e._v(" "),o("li",[o("code",[e._v("GetSigners() []AccAddress")]),e._v(": Return the list of signers. The SDK will make sure that each "),o("code",[e._v("message")]),e._v(" contained in a transaction is signed by all the signers listed in the list returned by this method.")])]),e._v(" "),o("p",[e._v("See an example implementation of a "),o("code",[e._v("message")]),e._v(" from the "),o("code",[e._v("gov")]),e._v(" module:")]),e._v(" "),o("p",[o("code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Cgljb250ZW50IDo9IG0uR2V0Q29udGVudCgpCglpZiBjb250ZW50ID09IG5pbCB7CgkJcmV0dXJuIHNka2Vycm9ycy5XcmFwKEVyckludmFsaWRQcm9wb3NhbENvbnRlbnQsICZxdW90O21pc3NpbmcgY29udGVudCZxdW90OykKCX0KCWlmICFJc1ZhbGlkUHJvcG9zYWxUeXBlKGNvbnRlbnQuUHJvcG9zYWxUeXBlKCkpIHsKCQlyZXR1cm4gc2RrZXJyb3JzLldyYXAoRXJySW52YWxpZFByb3Bvc2FsVHlwZSwgY29udGVudC5Qcm9wb3NhbFR5cGUoKSkKCX0KCWlmIGVyciA6PSBjb250ZW50LlZhbGlkYXRlQmFzaWMoKTsgZXJyICE9IG5pbCB7CgkJcmV0dXJuIGVycgoJfQoKCXJldHVybiBuaWwKfQoKLy8gR2V0U2lnbkJ5dGVzIGltcGxlbWVudHMgTXNnCmZ1bmMgKG0gTXNnU3VibWl0UHJvcG9zYWwpIEdldFNpZ25CeXRlcygpIFtdYnl0ZSB7CglieiA6PSBNb2R1bGVDZGMuTXVzdE1hcnNoYWxKU09OKCZhbXA7bSkKCXJldHVybiBzZGsuTXVzdFNvcnRKU09OKGJ6KQp9CgovLyBHZXRTaWduZXJzIGltcGxlbWVudHMgTXNnCmZ1bmMgKG0gTXNnU3VibWl0UHJvcG9zYWwpIEdldFNpZ25lcnMoKSBbXXNkay5BY2NBZGRyZXNzIHsKCXByb3Bvc2VyLCBfIDo9IHNkay5BY2NBZGRyZXNzRnJvbUJlY2gzMihtLlByb3Bvc2VyKQoJcmV0dXJuIFtdc2RrLkFjY0FkZHJlc3N7cHJvcG9zZXJ9Cn0KCi8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UKZnVuYyAobSBNc2dTdWJtaXRQcm9wb3NhbCkgU3RyaW5nKCkgc3RyaW5nIHsKCW91dCwgXyA6PSB5YW1sLk1hcnNoYWwobSkKCXJldHVybiBzdHJpbmcob3V0KQp9CgovLyBVbnBhY2tJbnRlcmZhY2VzIGltcGxlbWVudHMgVW5wYWNrSW50ZXJmYWNlc01lc3NhZ2UuVW5wYWNrSW50ZXJmYWNlcwpmdW5jIChtIE1zZ1N1Ym1pdFByb3Bvc2FsKSBVbnBhY2tJbnRlcmZhY2VzKHVucGFja2VyIHR5cGVzLkFueVVucGFja2VyKSBlcnJvciB7Cgl2YXIgY29udGVudCBDb250ZW50CglyZXR1cm4gdW5wYWNrZXIuVW5wYWNrQW55KG0uQ29udGVudCwgJmFtcDtjb250ZW50KQp9CgovLyBOZXdNc2dEZXBvc2l0IGNyZWF0ZXMgYSBuZXcgTXNnRGVwb3NpdCBpbnN0YW5jZQovL25vbGludDppbnRlcmZhY2VyCmZ1bmMgTmV3TXNnRGVwb3NpdChkZXBvc2l0b3Igc2RrLkFjY0FkZHJlc3MsIHByb3Bvc2FsSUQgdWludDY0LCBhbW91bnQgc2RrLkNvaW5zKSAqTXNnRGVwb3NpdCB7CglyZXR1cm4gJmFtcDtNc2dEZXBvc2l0e3Byb3Bvc2FsSUQsIGRlcG9zaXRvci5TdHJpbmcoKSwgYW1vdW50fQ=="}})],1),e._v(" "),o("h2",{attrs:{id:"queries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#queries"}},[e._v("#")]),e._v(" Queries")]),e._v(" "),o("p",[e._v("A "),o("code",[e._v("query")]),e._v(" is a request for information made by end-users of applications through an interface and processed by a full-node. A "),o("code",[e._v("query")]),e._v(" is received by a full-node through its consensus engine and relayed to the application via the ABCI. It is then routed to the appropriate module via "),o("code",[e._v("baseapp")]),e._v("'s "),o("code",[e._v("queryrouter")]),e._v(" so that it can be processed by the module's query service (./query-services.md). For a deeper look at the lifecycle of a "),o("code",[e._v("query")]),e._v(", click "),o("RouterLink",{attrs:{to:"/interfaces/query-lifecycle.html"}},[e._v("here")]),e._v(".")],1),e._v(" "),o("h3",{attrs:{id:"grpc-queries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#grpc-queries"}},[e._v("#")]),e._v(" gRPC Queries")]),e._v(" "),o("p",[e._v("Starting from v0.40, the prefered way to define queries is by using "),o("a",{attrs:{href:"https://developers.google.com/protocol-buffers/docs/proto#services",target:"_blank",rel:"noopener noreferrer"}},[e._v("Protobuf services"),o("OutboundLink")],1),e._v(". A "),o("code",[e._v("Query")]),e._v(" service should be created per module in "),o("code",[e._v("query.proto")]),e._v(". This service lists endpoints starting with "),o("code",[e._v("rpc")]),e._v(".")]),e._v(" "),o("p",[e._v("Here's an example of such a "),o("code",[e._v("Query")]),e._v(" service definition:")]),e._v(" "),o("p",[o("code-block",{staticClass:"codeblock",attrs:{language:"false",base64:"Ly8gUXVlcnkgZGVmaW5lcyB0aGUgZ1JQQyBxdWVyaWVyIHNlcnZpY2UuCnNlcnZpY2UgUXVlcnkgewogIC8vIEFjY291bnQgcmV0dXJucyBhY2NvdW50IGRldGFpbHMgYmFzZWQgb24gYWRkcmVzcy4KICBycGMgQWNjb3VudChRdWVyeUFjY291bnRSZXF1ZXN0KSByZXR1cm5zIChRdWVyeUFjY291bnRSZXNwb25zZSkgewogICAgb3B0aW9uIChnb29nbGUuYXBpLmh0dHApLmdldCA9ICZxdW90Oy9jb3Ntb3MvYXV0aC92MWJldGExL2FjY291bnRzL3thZGRyZXNzfSZxdW90OzsKICB9CgogIC8vIFBhcmFtcyBxdWVyaWVzIGFsbCBwYXJhbWV0ZXJzLgogIHJwYyBQYXJhbXMoUXVlcnlQYXJhbXNSZXF1ZXN0KSByZXR1cm5zIChRdWVyeVBhcmFtc1Jlc3BvbnNlKSB7CiAgICBvcHRpb24gKGdvb2dsZS5hcGkuaHR0cCkuZ2V0ID0gJnF1b3Q7L2Nvc21vcy9hdXRoL3YxYmV0YTEvcGFyYW1zJnF1b3Q7OwogIH0KfQ=="}})],1),e._v(" "),o("p",[e._v("As "),o("code",[e._v("proto.Message")]),e._v("s, generated "),o("code",[e._v("Response")]),e._v(" types implement by default "),o("code",[e._v("String()")]),e._v(" method of "),o("a",{attrs:{href:"https://golang.org/pkg/fmt/#Stringer",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("fmt.Stringer")]),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("A "),o("code",[e._v("RegisterQueryServer")]),e._v(" method is also generated and should be used to register the module's query server in "),o("code",[e._v("RegisterQueryService")]),e._v(" method from the "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#appmodule"}},[o("code",[e._v("AppModule")]),e._v(" interface")]),e._v(".")],1),e._v(" "),o("h3",{attrs:{id:"legacy-queries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#legacy-queries"}},[e._v("#")]),e._v(" Legacy Queries")]),e._v(" "),o("p",[e._v("Before the introduction of Protobuf and gRPC in the SDK, there was usually no specific "),o("code",[e._v("query")]),e._v(" object defined by module developers, contrary to "),o("code",[e._v("message")]),e._v("s. Instead, the SDK took the simpler approach of using a simple "),o("code",[e._v("path")]),e._v(" to define each "),o("code",[e._v("query")]),e._v(". The "),o("code",[e._v("path")]),e._v(" contains the "),o("code",[e._v("query")]),e._v(" type and all the arguments needed in order to process it. For most module queries, the "),o("code",[e._v("path")]),e._v(" should look like the following:")]),e._v(" "),o("code-block",{staticClass:"codeblock",attrs:{language:"",base64:"cXVlcnlDYXRlZ29yeS9xdWVyeVJvdXRlL3F1ZXJ5VHlwZS9hcmcxL2FyZzIvLi4uCg=="}}),e._v(" "),o("p",[e._v("where:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("queryCategory")]),e._v(" is the category of the "),o("code",[e._v("query")]),e._v(", typically "),o("code",[e._v("custom")]),e._v(" for module queries. It is used to differentiate between different kinds of queries within "),o("code",[e._v("baseapp")]),e._v("'s "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query"}},[o("code",[e._v("Query")]),e._v(" method")]),e._v(".")],1),e._v(" "),o("li",[o("code",[e._v("queryRoute")]),e._v(" is used by "),o("code",[e._v("baseapp")]),e._v("'s "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query-routing"}},[o("code",[e._v("queryRouter")])]),e._v(" to map the "),o("code",[e._v("query")]),e._v(" to its module. Usually, "),o("code",[e._v("queryRoute")]),e._v(" should be the name of the module.")],1),e._v(" "),o("li",[o("code",[e._v("queryType")]),e._v(" is used by the module's "),o("RouterLink",{attrs:{to:"/building-modules/query-services.html#legacy-queriers"}},[o("code",[e._v("querier")])]),e._v(" to map the "),o("code",[e._v("query")]),e._v(" to the appropriate "),o("code",[e._v("querier function")]),e._v(" within the module.")],1),e._v(" "),o("li",[o("code",[e._v("args")]),e._v(" are the actual arguments needed to process the "),o("code",[e._v("query")]),e._v(". They are filled out by the end-user. Note that for bigger queries, you might prefer passing arguments in the "),o("code",[e._v("Data")]),e._v(" field of the request "),o("code",[e._v("req")]),e._v(" instead of the "),o("code",[e._v("path")]),e._v(".")])]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("path")]),e._v(" for each "),o("code",[e._v("query")]),e._v(" must be defined by the module developer in the module's "),o("RouterLink",{attrs:{to:"/building-modules/module-interfaces.html#query-commands"}},[e._v("command-line interface file")]),e._v(".Overall, there are 3 mains components module developers need to implement in order to make the subset of the state defined by their module queryable:")],1),e._v(" "),o("ul",[o("li",[e._v("A "),o("RouterLink",{attrs:{to:"/building-modules/query-services.html#legacy-queriers"}},[o("code",[e._v("querier")])]),e._v(", to process the "),o("code",[e._v("query")]),e._v(" once it has been "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query-routing"}},[e._v("routed to the module")]),e._v(".")],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/building-modules/module-interfaces.html#query-commands"}},[e._v("Query commands")]),e._v(" in the module's CLI file, where the "),o("code",[e._v("path")]),e._v(" for each "),o("code",[e._v("query")]),e._v(" is specified.")],1),e._v(" "),o("li",[o("code",[e._v("query")]),e._v(" return types. Typically defined in a file "),o("code",[e._v("types/querier.go")]),e._v(", they specify the result type of each of the module's "),o("code",[e._v("queries")]),e._v(". These custom types must implement the "),o("code",[e._v("String()")]),e._v(" method of "),o("a",{attrs:{href:"https://golang.org/pkg/fmt/#Stringer",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("fmt.Stringer")]),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("h3",{attrs:{id:"store-queries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#store-queries"}},[e._v("#")]),e._v(" Store Queries")]),e._v(" "),o("p",[e._v("Store queries query directly for store keys. They use "),o("code",[e._v("clientCtx.QueryABCI(req abci.RequestQuery)")]),e._v(" to return the full "),o("code",[e._v("abci.ResponseQuery")]),e._v(" with inclusion Merkle proofs.")]),e._v(" "),o("p",[e._v("See following examples:")]),e._v(" "),o("p",[o("code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CXJlcSA6PSBhYmNpLlJlcXVlc3RRdWVyeXsKCQlQYXRoOiAgIGZtdC5TcHJpbnRmKCZxdW90O3N0b3JlLyVzL2tleSZxdW90OywgaG9zdC5TdG9yZUtleSksCgkJSGVpZ2h0OiBoZWlnaHQsCgkJRGF0YTogICBrZXksCgkJUHJvdmU6ICB0cnVlLAoJfQoKCXJlcywgZXJyIDo9IGNsaWVudEN0eC5RdWVyeUFCQ0kocmVxKQoJaWYgZXJyICE9IG5pbCB7CgkJcmV0dXJuIG5pbCwgbmlsLCBjbGllbnR0eXBlcy5IZWlnaHR7fSwgZXJyCgl9"}})],1),e._v(" "),o("p",[o("code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBoYW5kbGVRdWVyeVN0b3JlKGFwcCAqQmFzZUFwcCwgcGF0aCBbXXN0cmluZywgcmVxIGFiY2kuUmVxdWVzdFF1ZXJ5KSBhYmNpLlJlc3BvbnNlUXVlcnkgewoJLy8gJnF1b3Q7L3N0b3JlJnF1b3Q7IHByZWZpeCBmb3Igc3RvcmUgcXVlcmllcwoJcXVlcnlhYmxlLCBvayA6PSBhcHAuY21zLihzZGsuUXVlcnlhYmxlKQoJaWYgIW9rIHsKCQlyZXR1cm4gc2RrZXJyb3JzLlF1ZXJ5UmVzdWx0KHNka2Vycm9ycy5XcmFwKHNka2Vycm9ycy5FcnJVbmtub3duUmVxdWVzdCwgJnF1b3Q7bXVsdGlzdG9yZSBkb2Vzbid0IHN1cHBvcnQgcXVlcmllcyZxdW90OykpCgl9CgoJcmVxLlBhdGggPSAmcXVvdDsvJnF1b3Q7ICsgc3RyaW5ncy5Kb2luKHBhdGhbMTpdLCAmcXVvdDsvJnF1b3Q7KQoKCS8vIHdoZW4gYSBjbGllbnQgZGlkIG5vdCBwcm92aWRlIGEgcXVlcnkgaGVpZ2h0LCBtYW51YWxseSBpbmplY3QgdGhlIGxhdGVzdAoJaWYgcmVxLkhlaWdodCA9PSAwIHsKCQlyZXEuSGVpZ2h0ID0gYXBwLkxhc3RCbG9ja0hlaWdodCgpCgl9CgoJaWYgcmVxLkhlaWdodCAmbHQ7PSAxICZhbXA7JmFtcDsgcmVxLlByb3ZlIHsKCQlyZXR1cm4gc2RrZXJyb3JzLlF1ZXJ5UmVzdWx0KAoJCQlzZGtlcnJvcnMuV3JhcCgKCQkJCXNka2Vycm9ycy5FcnJJbnZhbGlkUmVxdWVzdCwKCQkJCSZxdW90O2Nhbm5vdCBxdWVyeSB3aXRoIHByb29mIHdoZW4gaGVpZ2h0ICZsdDs9IDE7IHBsZWFzZSBwcm92aWRlIGEgdmFsaWQgaGVpZ2h0JnF1b3Q7LAoJCQkpLAoJCSkKCX0KCglyZXNwIDo9IHF1ZXJ5YWJsZS5RdWVyeShyZXEpCglyZXNwLkhlaWdodCA9IHJlcS5IZWlnaHQKCglyZXR1cm4gcmVzcAp9"}})],1),e._v(" "),o("h2",{attrs:{hide:"",id:"next"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[e._v("#")]),e._v(" Next")]),e._v(" "),o("p",{attrs:{hide:""}},[e._v("Learn about "),o("RouterLink",{attrs:{to:"/building-modules/handler.html"}},[o("code",[e._v("handler")]),e._v("s")])],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);